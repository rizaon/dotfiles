#!/usr/bin/env bash

if [ $# == 0 ]; then
    echo ""
    echo "  find . -name \"*.java\" -exec grep (something) '{}' \; -print  | cat -n"
    echo ""
    exit
fi

ext="\.$1"
shift
srcstr="$1"
shift

while (( $# )); do
#  echo $1
  srcstr="$srcstr.*$1"
  shift
done
echo $srcstr


# find . -name "*.java" -exec grep "$*" '{}' \; -print  | cat -n

# find . -name "*.java" -exec grep -i "$srcstr" '{}' \; -print  | cat -n


function grepone() {
    filepath=$1
    srcstr=$2

    lblue='\033[0;34m'
    nc='\033[0m' # No Color
    linesep="-------------------------------------------"


    if grep -i -n -q "$srcstr" $filepath; then
        grep -i -n --color "$srcstr" $filepath
        echo -e "${lblue}${linesep} $filepath ${nc}"
    fi
}

export -f grepone

find . -type f -name "*$ext" | sort \
    | xargs -I {} bash -c "grepone {} $srcstr" \;

echo ""

